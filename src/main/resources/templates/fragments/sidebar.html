<ul th:fragment="sidebar" class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar" style="height: 100vh">

  <!-- Sidebar - Brand -->
  <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/">
    <div class="sidebar-brand-icon rotate-n-15">
      <img th:src="${setting.logoUrl != null ? setting.logoUrl : '/uploads/img/logoCms.png'}" alt="Logo" style="width: 24px; height: 24px; object-fit: contain;">
    </div>
    <div class="sidebar-brand-text mx-2" th:text="${setting.siteName != null ? setting.siteName : 'No Name'}">PUBLIC</div>
  </a>

  <!-- Divider -->
  <hr class="sidebar-divider my-0">

  <!-- Nav Item - Dashboard -->
  <li class="nav-item active">
    <a class="nav-link" href="/dashboard">
      <i class="fas fa-fw fa-tachometer-alt"></i>
      <span th:text="#{dashboard}">Dashboard</span>
    </a>
  </li>

  <!-- Divider -->
  <hr class="sidebar-divider">

  <!-- Nav Item - Post -->
  <li class="nav-item">
    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsePost" aria-expanded="true" aria-controls="collapsePost">
      <i class="fas fa-fw fa-edit"></i>
      <span th:text="#{post}">Post</span>
    </a>
    <div id="collapsePost" class="collapse" aria-labelledby="headingPost" data-parent="#accordionSidebar">
      <div class="bg-white py-2 collapse-inner rounded">
        <h6 class="collapse-header">Post Features:</h6>
        <a th:text="#{list.posts}" class="collapse-item" th:href="@{/posts}">List of Posts</a>
        <a th:text="#{post.category}" class="collapse-item" th:href="@{/tittles}">Create Post</a>
      </div>
    </div>
  </li>

  <!-- Nav Item - Media -->
  <li class="nav-item">
    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseMedia" aria-expanded="true" aria-controls="collapseMedia">
      <i class="fas fa-fw fa-photo-video"></i>
      <span th:text="#{media}">Media</span>
    </a>
    <div id="collapseMedia" class="collapse" aria-labelledby="headingMedia" data-parent="#accordionSidebar">
      <div class="bg-white py-2 collapse-inner rounded">
        <a th:text="#{list.media}" class="collapse-item" th:href="@{/media}"></a>
      </div>
    </div>
  </li>

  <!-- Nav Item - Pages -->
  <li class="nav-item">
    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsePage" aria-expanded="true" aria-controls="collapsePage">
      <i class="fas fa-fw fa-file-alt"></i>
      <span th:text="#{pages}">Pages</span>
    </a>
    <div id="collapsePage" class="collapse" aria-labelledby="headingPage" data-parent="#accordionSidebar">
      <div class="bg-white py-2 collapse-inner rounded">
        <h6 th:text="#{page.features}" class="collapse-header">Page Features:</h6>
        <a th:text="#{list.pages}" class="collapse-item" href="/pages">List of Pages</a>
        <a th:text="#{create.page}" class="collapse-item" href="/pages/create">Create Page</a>
      </div>
    </div>
  </li>

  <!-- Nav Item - Menu -->
  <li class="nav-item" th:if="${session.role.name() == 'ADMIN' or session.role.name() == 'MODERATOR'}">
    <a class="nav-link" href="/menus">
      <i class="fas fa-fw fa-list"></i>
      <span th:text="#{menu}">Menu</span>
    </a>
  </li>

  <!-- Nav Item - Event -->
  <li class="nav-item">
    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseEvent" aria-expanded="true" aria-controls="collapseEvent">
      <i class="fas fa-fw fa-calendar-alt"></i>
      <span th:text="#{event}">Event</span>
    </a>
    <div id="collapseEvent" class="collapse" aria-labelledby="headingEvent" data-parent="#accordionSidebar">
      <div class="bg-white py-2 collapse-inner rounded">
        <h6 th:text="#{event.features}" class="collapse-header">Event Features:</h6>
        <a class="collapse-item" th:text="#{list.events}" th:href="@{/events}">List of Events</a>
      </div>
    </div>
  </li>

  <!-- Nav Item - Users -->
  <li class="nav-item" th:if="${session.role.name() == 'ADMIN'}">
    <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUser" aria-expanded="true" aria-controls="collapseUser">
      <i class="fas fa-fw fa-user"></i>
      <span th:text="#{users}">Users</span>
    </a>
    <div id="collapseUser" class="collapse" aria-labelledby="headingUser" data-parent="#accordionSidebar">
      <div class="bg-white py-2 collapse-inner rounded">
        <h6 th:text="#{user.features}" class="collapse-header">Page Features:</h6>
        <a th:text="#{list.users}" class="collapse-item" href="/users">List of Users</a>
        <a th:text="#{create.user}" class="collapse-item" href="/users/create">Create User</a>
      </div>
    </div>
  </li>

  <!-- Nav Item - Setting -->
  <li class="nav-item">
    <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#settingModal">
      <i class="fas fa-fw fa-cogs"></i>
      <span th:text="#{setting}">Setting</span>
    </a>
  </li>

  <!-- Divider -->
  <hr class="sidebar-divider d-none d-md-block">

  <!-- Sidebar Toggler -->
  <div class="text-center d-none d-md-inline">
    <button class="rounded-circle border-0" id="sidebarToggle"></button>
  </div>

  <!-- Setting Modal -->
  <div class="modal fade" id="settingModal" tabindex="-1" aria-labelledby="settingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" th:text="#{setting.edit}">Edit Settings</h5>

        </div>
        <div class="modal-body">
          <form th:action="@{/setting}" method="post" enctype="multipart/form-data">
            <div class="mb-3">
              <label for="siteName" th:text="#{setting.siteNameLabel}" class="form-label">Site Name</label>
              <input type="text" id="siteName" name="siteName" class="form-control" th:value="${setting.siteName}" required>
            </div>
            <div class="mb-3">
              <label class="form-label" th:text="#{current.filePath}">Current File</label>
              <a id="existingLogo" th:href="${setting.logoUrl}" th:text="${setting.logoUrl != null ? setting.logoUrl : 'No file'}" target="_blank" th:style="${setting.logoUrl != null} ? 'display: inline-block' : 'display: inline-block'"></a>
              <input type="hidden" id="editExistingLogo" name="existingLogo" th:value="${setting.logoUrl}"/>
            </div>
            <div class="mb-3">
              <label class="form-label" th:text="#{upload.filePath}">Upload New File (optional)</label>
              <input type="file" class="form-control" name="logo" accept="image/*" />
            </div>
            <button type="submit" class="btn btn-primary" th:text="#{setting.save}">Save Changes</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</ul>